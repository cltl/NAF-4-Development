# Discussion document moving to NAF version 4

This document contains proposals to be discussed to update NAF version 3 to version 4.

## Important for data release 

### Tokens and terms
NAF currently does not have subtoken representation.
Having this would facilitate representating compounds.

While working on compounds and multi-word expressions,
this became an active discussion point.

An important task to aid in deciding how to deal with this is to inspect which modules make use of which layer:
* POS taggers:
* WSD modules: typically term layer
* Entity Detection:
* Entity Linking:
* ...

### Multi-words

NAF makes a distinction between components and terms.
A proposal is to represent terms that contain multiple tokens, e..g, phrasal verbs and idioms,
in the following way:

```xml
    <term id="t2" lemma="give" pos="VERB" phrase_type="component">
      <span>
        <target id="w2"/>
      </span>
    </term>
    <term id="t3" lemma="up" pos="PART" phrase_type="component">
      <span>
        <target id="w3"/>
      </span>
    </term>
    <term id="t2_t3" lemma="give_up" pos="V" phrase_type="multi_word">
        <component>
            <target id="t2"/>
            <target id="t3"/>
        </component>
    </term>
```

One problem is that the dtd will not validate since t2 has now been defined twice in the NAF file.

### Compound terms
Section 8.4 of the [NAF specifications version 3](https://github.com/newsreader/NAF/blob/master/naf.pdf)
describe how to represent compound terms.
* In the example, would *w7* and *w8* refer to components of a compound?
* How to deal with [tussen-s](https://nl.wiktionary.org/wiki/tussen-s) or other vowels or consonants used to bind the components?

### Annotation process identifiers in header
* begin and end time
* name
* version
* use identifiers for annotations with time stamp

### Entity spans
For an entity, the span is represented as:
```xml
<references>
    <span>
        <target id="t8"/>
    </span>
</references>```

In terms, the span is represented as:
```xml
<span>
    <target id="w1"/>
</span>
```

Would it be possible to align the representations, i.e., no *references* element for an entity?

### part of speech
The current part of speech tagset is:
* N common noun
* R proper noun
* G adjective
* V verb
* P preposition
* A adverb
* C conjunction
* D determiner
* O other

A proposal is to move to [Universal Dependencies](https://universaldependencies.org/) since it is
more widely accepted and hopefully would limit mapping to this tagset.

Even though the DTD will validate if you use another tagset, I propose that we update the DTD regardless.

### IRIs and name spaces for identifiers
The goal is to make sure we use IRIs as much as possible.

### the status attribute
We propose to add a **status** attribute to at least the following layers:
* entity
* predicate
* coref

It could also be added to any element to indicate more information about the provenance.

This allows us to indicate whether a layer was manually annotated or by a system.
Also, we can then deprecate certain elements.

## Useful but not immediately needed for data release

### Multiple layers of the same layer
NAF currently does not allow to contain multiple layers of the same information layer,
e.g., multiple text, terms, entities, srl, etc. layers.

### Representation discourse units
There is a desire to be able to represent **headers**, **paragraphs**, etc.
One proposal is to represent ranges of term ids that represent a particular discourse unit, e.g.,
{t1, t2, t3, t4} represent the title.

### Hidden characters
Text can contains hidden characters such as newlines, tabs, etc.
It is possible to use ![CDATA[TOKEN]] surrounding the token but other modules might break when we allow hidden characters.
Is there a good convention how to deal with hidden characters?
